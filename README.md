# tmdb-trakt-sync
使用 tmdb-trakt-sync 可以在您的 [TMDB](https://www.themoviedb.org/) 和 [Trakt](https://trakt.tv/) 账号之间同步电影和电视节目的评分数据及观看历史。

## 运行条件
- 安装了 Python 3.0 或更高版本。
- 安装了必要的第三方库：requests。
- 有可用的 TMDB 和 Trakt 账号。

## 准备工作
- 获取 TMDB API 密钥。请在 TMDB 账号设置中（免费）申请 API 并获取 API 密钥。
- 获取 Trakt API 密钥。请在 Trakt 账号设置中（免费）创建新的 API 应用程序以获取客户端 ID 和客户端密钥。(需要勾选 `Scrobble` 和 `Check In` 选项)

## 使用方法
1. 将仓库克隆或下载到计算机上的一个目录中。
2. 根据需要，修改脚本中的参数：`SYNC_FROM_TMDB_TO_TRAKT`、`SYNC_FROM_TRAKT_TO_TMDB`。
   - 如果您想将评分从 TMDB 同步到 Trakt，请将 `SYNC_FROM_TMDB_TO_TRAKT` 设置为 `True`，否则设置为 `False`。
   - 如果您想将评分从 Trakt 同步到 TMDB，请将 `SYNC_FROM_TRAKT_TO_TMDB` 设置为 `True`，否则设置为 `False`。
3. 修改 `start.command (Mac)` 或 `start.bat (Win)` 中的路径，以指向您存放 `tmdb-trakt-sync.py` 脚本的目录。
4. 双击运行 `start.command` 或 `start.bat` 脚本以执行 `tmdb-trakt-sync.py` 脚本。
5. 首次运行时需要您在控制台中提供以下信息：

   - 您的 TMDB 用户名。
   - 您的 TMDB 密码。
   - 您的 TMDB API 密钥。
   - 您的 Trakt 客户端 ID（Client ID）。
   - 您的 Trakt 客户端密钥（Client Secret）。
   - 您的 Trakt 授权码（Authorization Code）。

   脚本会根据您提供的信息生成一个名为 `config.json` 的配置文件并保存在脚本所在的目录中，再次运行脚本时会自动读取配置文件，不需要再次提供信息。
6. 脚本将自动从您的 TMDB 和 Trakt 账号中获取评分数据并按照设置进行同步。运行过程中，您可以在控制台看到各部影片的同步状态和评分数据。

## 注意事项
- 请确保您提供了正确有效的必要信息。
- 脚本会根据影片的 TMDB ID 进行匹配，当您从 TMDB 向 Trakt 同步时，可能会有一些影片在 Trakt 上没有对应的条目，这些影片将无法进行同步。
- 脚本执行过程中可能会耗时较长，特别是当有大量评分数据需要同步时，请耐心等待脚本完成。
- 脚本会根据需要在存档文件中记录已同步的评分数据，当再次运行脚本时，脚本会跳过存档文件中存在的影片，避免重复评分。若同步后对评分做了修改，将无法使用脚本更新评分。
- 若脚本在运行过程中由于网络不稳定等因素造成了运行中断，已经处理过的数据不会受到影响，重新运行脚本就会继续处理剩余数据。
- 部分地区可能会由于网络原因造成 TMDB API 调用失败，无法运行脚本，请确保您的网络环境可以正常调用 TMDB API。
- 部分地区可能会由于网络原因造成 Trakt API 调用失败，无法运行脚本，请确保您的网络环境可以正常调用 Trakt API。

## 已知问题
- 脚本会在每次运行后记录同步时间，当再次运行脚本时，只会获取上次同步时间后新增的评分数据进行同步。由于目前无法通过 TMDB API 同时获取评分及评分时间，每次运行脚本时都会重新获取 TMDB 账号中的所有评分数据，若数据较多，获取时间可能较长。
- 在 TMDB 上有评分数据的影片将被默认为已观看状态，同步时若该影片在 Trakt 上是未观看状态，将被标记为已观看，若为电视节目，则会将整个节目标记为已观看，若该节目已经存在观看记录，则不会重新标记观看状态。若脚本在运行过程中发生了中断，可能会导致个别影片的观看状态标记失败。
- 首次运行时将会对所有数据进行同步，并记录已同步影片的 ID，若数据较多，耗时可能较长，请耐心等待。
